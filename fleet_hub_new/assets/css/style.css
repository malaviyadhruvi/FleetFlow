/* ============================================================
   FLEET HUB — Palette: White · Cream · Sand · Teal · Dark Teal · Navy
   ============================================================ */
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800&display=swap');

:root {
  --cream:        #F0EDDE;
  --sand:         #C9A96E;
  --teal:         #0D8C8C;
  --teal-dark:    #076B6B;
  --navy:         #0D2137;

  --primary:      var(--navy);
  --primary-lt:   #163354;
  --accent:       var(--teal);
  --accent-lt:    #10A8A8;
  --accent-pale:  #E0F4F4;

  --bg:           #FFFFFF;
  --surface:      #FFFFFF;
  --surface-2:    #F8F7F2;
  --cream-bg:     var(--cream);

  --border:       #E6E2D6;
  --border-dark:  #C9C4B4;

  --text:         #1A2332;
  --text-muted:   #6B7280;
  --text-light:   #9CA3AF;

  --success:      #166534;
  --success-bg:   #DCFCE7;
  --warning:      #92400E;
  --warning-bg:   #FEF3C7;
  --danger:       #991B1B;
  --danger-bg:    #FEE2E2;
  --info:         #1E40AF;
  --info-bg:      #DBEAFE;

  --sidebar-w:    272px;
  --header-h:     60px;
  --radius:       10px;
  --radius-lg:    16px;
  --shadow:       0 1px 4px rgba(13,33,55,.06),0 1px 2px rgba(13,33,55,.04);
  --shadow-md:    0 8px 24px rgba(13,33,55,.10);
  --shadow-lg:    0 20px 40px rgba(13,33,55,.16);
  --transition:   .22s cubic-bezier(0.4,0,0.2,1);
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:15px}
body{font-family:'DM Sans',-apple-system,BlinkMacSystemFont,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh}
a{color:var(--accent);text-decoration:none}
a:hover{color:var(--accent-lt)}
img{max-width:100%}
input,select,textarea,button{font-family:inherit;font-size:inherit}

/* ============================================================ AUTH */
.auth-wrapper{min-height:100vh;display:grid;grid-template-columns:1fr 1fr}
.auth-brand{background:linear-gradient(150deg,var(--navy) 0%,#0a2847 60%,var(--teal-dark) 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:3rem;color:#fff;text-align:center;position:relative;overflow:hidden}
.auth-brand::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 30% 70%,rgba(13,140,140,.3) 0%,transparent 60%)}
.auth-brand .brand-icon{width:76px;height:76px;background:rgba(13,140,140,.25);border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 1.5rem;position:relative;z-index:1;border:1px solid rgba(13,140,140,.5)}
.auth-brand h1{font-size:2rem;font-weight:800;letter-spacing:-.5px;position:relative;z-index:1}
.auth-brand p{color:rgba(255,255,255,.65);margin-top:.5rem;font-size:.95rem;position:relative;z-index:1}
.auth-brand .brand-features{margin-top:3rem;position:relative;z-index:1;text-align:left}
.auth-brand .feat{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;color:rgba(255,255,255,.85);font-size:.875rem}
.auth-brand .feat-icon{width:32px;height:32px;background:rgba(13,140,140,.25);border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.auth-form-side{display:flex;align-items:center;justify-content:center;padding:2rem;background:var(--surface)}
.auth-card{width:100%;max-width:420px}
.auth-card h2{font-size:1.6rem;font-weight:800;color:var(--primary);margin-bottom:.25rem}
.auth-card .subtitle{color:var(--text-muted);font-size:.9rem;margin-bottom:2rem}

/* ============================================================ FORMS */
.form-group{margin-bottom:1.25rem}
.form-group label{display:block;font-size:.825rem;font-weight:600;color:var(--text);margin-bottom:.45rem;letter-spacing:.02em}
.form-control{width:100%;padding:.65rem .9rem;border:1.5px solid var(--border);border-radius:var(--radius);background:var(--surface);color:var(--text);transition:border-color var(--transition),box-shadow var(--transition);outline:none}
.form-control:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(13,140,140,.14)}
.form-control::placeholder{color:var(--text-light)}
.input-group{position:relative}
.input-group .form-control{padding-left:2.5rem}
.input-group .input-icon{position:absolute;left:.8rem;top:50%;transform:translateY(-50%);color:var(--text-muted);font-size:1rem;pointer-events:none}
.input-group .input-action{position:absolute;right:.8rem;top:50%;transform:translateY(-50%);color:var(--text-muted);cursor:pointer;background:none;border:none;padding:0}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.form-hint{font-size:.78rem;color:var(--text-muted);margin-top:.3rem}

/* ============================================================ BUTTONS */
.btn{display:inline-flex;align-items:center;gap:.45rem;padding:.65rem 1.25rem;border-radius:var(--radius);font-weight:600;font-size:.875rem;cursor:pointer;border:1.5px solid transparent;transition:all var(--transition);text-decoration:none;white-space:nowrap}
.btn-primary{background:var(--accent);color:#fff;border-color:var(--accent)}
.btn-primary:hover{background:var(--teal-dark);border-color:var(--teal-dark);color:#fff;transform:translateY(-1px);box-shadow:0 4px 16px rgba(13,140,140,.35)}
.btn-navy{background:var(--navy);color:#fff;border-color:var(--navy)}
.btn-navy:hover{background:var(--primary-lt);color:#fff}
.btn-outline{background:transparent;color:var(--accent);border-color:var(--accent)}
.btn-outline:hover{background:var(--accent-pale)}
.btn-danger{background:var(--danger);color:#fff;border-color:var(--danger)}
.btn-danger:hover{background:#7f1d1d;color:#fff}
.btn-ghost{background:transparent;color:var(--text-muted);border-color:var(--border)}
.btn-ghost:hover{background:var(--surface-2);color:var(--text)}
.btn-sm{padding:.4rem .85rem;font-size:.8rem}
.btn-lg{padding:.8rem 1.6rem;font-size:1rem}
.btn-full{width:100%;justify-content:center}
.btn:disabled{opacity:.5;cursor:not-allowed;transform:none!important}
.btn-icon{padding:.45rem .55rem}

/* ============================================================ LAYOUT */
.app-layout{display:flex;min-height:100vh}

/* Overlay backdrop */
.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(13,33,55,.45);z-index:98;opacity:0;transition:opacity var(--transition)}
.sidebar-overlay.visible{display:block}
.sidebar-overlay.active{opacity:1}

/* Sidebar — slide-over, hidden by default */
.sidebar{width:var(--sidebar-w);background:var(--navy);color:#fff;display:flex;flex-direction:column;position:fixed;top:0;left:0;height:100vh;z-index:99;transform:translateX(-100%);transition:transform .3s cubic-bezier(0.32,0,0.24,1);box-shadow:var(--shadow-lg)}
.sidebar.open{transform:translateX(0)}

.sidebar-brand{height:var(--header-h);padding:0 1.25rem;display:flex;align-items:center;gap:.75rem;border-bottom:1px solid rgba(255,255,255,.1);flex-shrink:0}
.sidebar-brand .brand-logo{width:36px;height:36px;background:var(--teal);border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:1.1rem}
.sidebar-brand .brand-text{font-size:1.05rem;font-weight:700;letter-spacing:-.3px}
.sidebar-brand .brand-sub{font-size:.7rem;color:rgba(255,255,255,.45);display:block;margin-top:-2px}
.sidebar-close{margin-left:auto;background:none;border:none;color:rgba(255,255,255,.5);font-size:1.25rem;cursor:pointer;line-height:1;padding:.3rem .35rem;border-radius:6px;transition:background var(--transition),color var(--transition)}
.sidebar-close:hover{background:rgba(255,255,255,.1);color:#fff}

.sidebar-nav{flex:1;overflow-y:auto;padding:1rem 0}
.nav-section-title{font-size:.68rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:rgba(255,255,255,.3);padding:.75rem 1.25rem .3rem}
.nav-item{display:flex;align-items:center;gap:.75rem;padding:.7rem 1.25rem;color:rgba(255,255,255,.7);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition);text-decoration:none;position:relative}
.nav-item:hover{color:#fff;background:rgba(255,255,255,.07)}
.nav-item.active{color:#fff;background:rgba(13,140,140,.2)}
.nav-item.active::before{content:'';position:absolute;left:0;top:8px;bottom:8px;width:3px;background:var(--teal);border-radius:0 3px 3px 0}
.nav-item .nav-icon{width:20px;text-align:center;font-size:1.05rem;flex-shrink:0}
.nav-badge{margin-left:auto;background:var(--danger);color:#fff;border-radius:20px;font-size:.68rem;font-weight:700;padding:1px 7px}

.sidebar-footer{padding:.75rem 1rem;border-top:1px solid rgba(255,255,255,.1)}
.sidebar-user{display:flex;align-items:center;gap:.75rem;padding:.5rem;border-radius:var(--radius)}
.sidebar-user .avatar{width:36px;height:36px;border-radius:50%;background:var(--teal);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.875rem;flex-shrink:0}
.sidebar-user .user-info{flex:1;min-width:0}
.sidebar-user .user-name{font-size:.85rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sidebar-user .user-role{font-size:.72rem;color:rgba(255,255,255,.45)}

/* Main always full-width */
.main-content{flex:1;display:flex;flex-direction:column;min-height:100vh;width:100%}

/* Topbar */
.topbar{height:var(--header-h);background:var(--surface);border-bottom:2px solid var(--cream);display:flex;align-items:center;padding:0 1.5rem;gap:1rem;position:sticky;top:0;z-index:50}

/* 3-dot / hamburger menu trigger */
.menu-trigger{display:flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:10px;background:var(--surface-2);border:1.5px solid var(--border);cursor:pointer;transition:all var(--transition);flex-shrink:0;color:var(--navy)}
.menu-trigger:hover{background:var(--cream-bg);border-color:var(--sand);color:var(--teal-dark);transform:scale(1.06)}
.menu-trigger svg{width:18px;height:18px;display:block}

/* topbar brand */
.topbar-brand{display:flex;align-items:center;gap:.55rem;font-size:1rem;font-weight:800;color:var(--navy);letter-spacing:-.4px}
.topbar-brand-logo{width:28px;height:28px;background:var(--teal);border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:.85rem}

.topbar-title{font-size:1rem;font-weight:700;color:var(--primary);flex:1}
.topbar-actions{display:flex;align-items:center;gap:.75rem}
.topbar-sep{width:1px;height:22px;background:var(--border)}

.page-content{padding:1.75rem;flex:1}
.page-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1.5rem;gap:1rem}
.page-header h1{font-size:1.35rem;font-weight:800;color:var(--primary)}
.page-header p{color:var(--text-muted);font-size:.875rem;margin-top:.2rem}

/* ============================================================ KPI */
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}
.kpi-card{background:var(--surface);border-radius:var(--radius-lg);padding:1.25rem;border:1.5px solid var(--border);box-shadow:var(--shadow);display:flex;flex-direction:column;gap:.5rem;transition:transform .25s,box-shadow .25s,border-color .25s;cursor:pointer}
.kpi-card:hover{transform:translateY(-4px);box-shadow:0 12px 28px rgba(13,33,55,.1);border-color:var(--sand)}
.kpi-header{display:flex;align-items:center;justify-content:space-between}
.kpi-label{font-size:.77rem;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.06em}
.kpi-icon{display:flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:10px;font-size:1.1rem;animation:kpiFloat 4s ease-in-out infinite}
.kpi-icon.teal{background:var(--accent-pale);color:var(--teal)}
.kpi-icon.navy{background:#dbeafe;color:var(--info)}
.kpi-icon.orange{background:var(--warning-bg);color:#B45309}
.kpi-icon.green{background:var(--success-bg);color:var(--success)}
.kpi-icon.red{background:var(--danger-bg);color:var(--danger)}
.kpi-icon.sand{background:#F5EDD4;color:#8B6914}
.kpi-value{font-size:1.8rem;font-weight:800;color:var(--primary);line-height:1;animation:fadeInUp .8s ease forwards;opacity:0}
.kpi-sub{font-size:.78rem;color:var(--text-muted)}
.kpi-trend{font-size:.78rem;font-weight:600}
.kpi-trend.up{color:var(--success)}
.kpi-trend.dn{color:var(--danger)}

/* ============================================================ CARDS */
.card{background:var(--surface);border-radius:var(--radius-lg);border:1.5px solid var(--border);box-shadow:var(--shadow);overflow:hidden}
.card-header{padding:1rem 1.25rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:1rem;background:var(--surface-2)}
.card-header h3{font-size:.95rem;font-weight:700;color:var(--primary)}
.card-body{padding:1.25rem}

/* ============================================================ TABLE */
.data-table{width:100%;border-collapse:collapse;font-size:.875rem}
.data-table th{padding:.7rem 1rem;text-align:left;font-size:.75rem;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.05em;background:var(--cream-bg);border-bottom:1.5px solid var(--border);white-space:nowrap}
.data-table td{padding:.75rem 1rem;border-bottom:1px solid var(--border);color:var(--text);vertical-align:middle}
.data-table tr:last-child td{border-bottom:none}
.data-table tbody tr:hover{background:var(--surface-2)}
.data-table .actions{display:flex;gap:.4rem}

/* ============================================================ PILLS */
.pill{display:inline-flex;align-items:center;gap:.3rem;padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;white-space:nowrap}
.pill::before{content:'';width:6px;height:6px;border-radius:50%}
.pill-available{background:var(--success-bg);color:var(--success)}.pill-available::before{background:var(--success)}
.pill-on-trip,.pill-on-duty{background:var(--info-bg);color:var(--info)}.pill-on-trip::before,.pill-on-duty::before{background:var(--info);animation:pulse 1.5s infinite}
.pill-in-shop{background:var(--warning-bg);color:var(--warning)}.pill-in-shop::before{background:#D97706}
.pill-retired,.pill-suspended{background:var(--danger-bg);color:var(--danger)}.pill-retired::before,.pill-suspended::before{background:var(--danger)}
.pill-off-duty{background:#f1f5f9;color:var(--text-muted)}.pill-off-duty::before{background:var(--text-muted)}
.pill-draft{background:#f1f5f9;color:var(--text-muted)}.pill-draft::before{background:var(--text-muted)}
.pill-dispatched{background:var(--info-bg);color:var(--info)}.pill-dispatched::before{background:var(--info)}
.pill-completed{background:var(--success-bg);color:var(--success)}.pill-completed::before{background:var(--success)}
.pill-cancelled{background:var(--danger-bg);color:var(--danger)}.pill-cancelled::before{background:var(--danger)}
.pill-in-progress{background:var(--warning-bg);color:var(--warning)}.pill-in-progress::before{background:#D97706}

/* ============================================================ ALERTS */
.alert{display:flex;align-items:center;justify-content:space-between;padding:.8rem 1rem;border-radius:var(--radius);margin-bottom:1rem;font-size:.875rem;font-weight:500}
.alert button{background:none;border:none;cursor:pointer;font-size:1.1rem;line-height:1;opacity:.6}
.alert-success{background:var(--success-bg);color:var(--success);border:1px solid #86efac}
.alert-error{background:var(--danger-bg);color:var(--danger);border:1px solid #fca5a5}
.alert-warning{background:var(--warning-bg);color:var(--warning);border:1px solid #fcd34d}
.alert-info{background:var(--info-bg);color:var(--info);border:1px solid #93c5fd}

/* ============================================================ MODAL */
.modal-overlay{position:fixed;inset:0;background:rgba(13,33,55,.5);z-index:200;display:flex;align-items:center;justify-content:center;padding:1rem;opacity:0;pointer-events:none;transition:opacity var(--transition)}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal{background:var(--surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:560px;max-height:90vh;overflow-y:auto;transform:translateY(-14px);transition:transform var(--transition)}
.modal-overlay.open .modal{transform:translateY(0)}
.modal-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.modal-header h3{font-size:1.05rem;font-weight:700;color:var(--primary)}
.modal-close{background:none;border:none;font-size:1.25rem;cursor:pointer;color:var(--text-muted);padding:.2rem}
.modal-body{padding:1.5rem}
.modal-footer{padding:1rem 1.5rem;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:.75rem}

/* ============================================================ FILTERS */
.filter-bar{display:flex;gap:.75rem;margin-bottom:1.25rem;flex-wrap:wrap;align-items:center}
.search-input{position:relative}
.search-input input{padding-left:2.2rem;min-width:220px}
.search-input .icon{position:absolute;left:.7rem;top:50%;transform:translateY(-50%);color:var(--text-muted)}
.filter-bar select.form-control{width:auto;min-width:140px}

/* ============================================================ PROGRESS */
.progress-bar{height:6px;background:var(--border);border-radius:99px;overflow:hidden}
.progress-bar .fill{height:100%;border-radius:99px;transition:width .4s;animation:fillSlide 1.2s ease-out}
.fill-green{background:var(--success)}.fill-orange{background:#F59E0B}.fill-red{background:var(--danger)}.fill-teal{background:var(--teal)}.fill-sand{background:var(--sand)}

/* ============================================================ ANALYTICS */
.analytics-grid{display:grid;grid-template-columns:2fr 1fr;gap:1.25rem}
.chart-placeholder{background:linear-gradient(135deg,var(--cream-bg) 0%,var(--accent-pale) 100%);border-radius:var(--radius);height:200px;display:flex;align-items:center;justify-content:center;color:var(--text-muted);font-size:.875rem;flex-direction:column;gap:.5rem}

/* ============================================================ EMPTY */
.empty-state{text-align:center;padding:3rem 1rem;color:var(--text-muted)}
.empty-state .icon{font-size:2.5rem;margin-bottom:.75rem}
.empty-state h4{font-size:1rem;font-weight:600;color:var(--text)}
.empty-state p{font-size:.875rem;margin-top:.25rem}

/* ============================================================ RESPONSIVE */
@media(max-width:900px){.auth-wrapper{grid-template-columns:1fr}.auth-brand{display:none}.analytics-grid{grid-template-columns:1fr}.kpi-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:500px){.form-row{grid-template-columns:1fr}.kpi-grid{grid-template-columns:1fr}.page-content{padding:1rem}}

/* ============================================================ UTILS */
.text-muted{color:var(--text-muted);font-size:.85rem}.text-sm{font-size:.825rem}.text-bold{font-weight:700}.text-center{text-align:center}
.mt-1{margin-top:.5rem}.mt-2{margin-top:1rem}.mt-3{margin-top:1.5rem}.mb-1{margin-bottom:.5rem}.mb-2{margin-bottom:1rem}
.divider{height:1px;background:var(--border);margin:1.25rem 0}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:1.25rem}
.tag{display:inline-flex;padding:.2rem .6rem;border-radius:5px;font-size:.75rem;font-weight:600;background:var(--cream-bg);color:var(--text-muted)}

::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border-dark);border-radius:99px}::-webkit-scrollbar-thumb:hover{background:var(--sand)}

#toast-container{position:fixed;bottom:1.5rem;right:1.5rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem}
.toast{padding:.75rem 1.25rem;border-radius:var(--radius);box-shadow:var(--shadow-md);font-size:.875rem;font-weight:500;min-width:220px;max-width:380px;animation:slideIn .35s ease}
.toast-success{background:var(--teal);color:#fff}.toast-error{background:var(--danger);color:#fff}

.odo{font-size:.8rem;color:var(--text-muted)}
.capacity-bar{display:flex;align-items:center;gap:.5rem}
.capacity-bar span{font-size:.78rem;color:var(--text-muted);white-space:nowrap}

/* ============================================================ ANIMATIONS */
.vehicle-icon{display:inline-block;font-size:2rem;position:relative;opacity:0;transform:translateX(-100px) rotate(-10deg);animation:vehicleDrive 1.8s ease-out forwards}
@keyframes vehicleDrive{0%{transform:translateX(-100px) rotate(-10deg);opacity:0}60%{transform:translateX(14px) rotate(3deg);opacity:1}100%{transform:translateX(0) rotate(0)}}
@keyframes kpiFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@keyframes fadeInUp{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(30,64,175,.6)}70%{box-shadow:0 0 0 5px rgba(30,64,175,0)}100%{box-shadow:0 0 0 0 rgba(30,64,175,0)}}
@keyframes slideIn{from{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes fillSlide{from{width:0%}}
